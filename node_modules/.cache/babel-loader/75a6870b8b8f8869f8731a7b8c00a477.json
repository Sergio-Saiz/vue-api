{"ast":null,"code":"import { mapState, mapActions } from 'vuex';\nimport axios from 'axios';\nimport VueRouter from 'vue-router';\nexport default {\n  mounted() {\n    axios.get('http://localhost:250/api/v1/users/' + this.userId, {\n      headers: {\n        'Authorization': `Bearer ${this.token}`\n      }\n    }).then(res => {\n      this.user = res.data;\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n\n  created() {//  this.dashboard(this.token)\n  },\n\n  computed: { ...mapState(['token', 'username', 'userId'])\n  },\n\n  data() {\n    return {\n      user: {},\n      userCategories: {},\n      oldPassword: null,\n      newPassword: null\n    };\n  },\n\n  methods: {\n    // ...mapActions(['dashboard'])\n    updateUser(user) {\n      axios({\n        method: 'put',\n        url: 'http://localhost:250/api/v1/users/' + this.userId,\n        headers: {\n          'Authorization': `Bearer ${this.token}`\n        },\n        data: {\n          name: this.user.name\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.user = res.data;\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n\n    updatePassword(oldPassword, newPassword) {\n      axios({\n        method: 'put',\n        url: 'http://localhost:250/api/v1/users/' + this.userId + '/change_password',\n        headers: {\n          'Authorization': `Bearer ${this.token}`\n        },\n        data: {\n          oldPassword: this.oldPassword,\n          newPassword: this.newPassword\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.oldPassword = null;\n        this.newPassword = null;\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n\n    deleteUser() {\n      axios({\n        method: 'delete',\n        url: 'http://localhost:250/api/v1/users/' + this.userId,\n        headers: {\n          'Authorization': `Bearer ${this.token}`\n        }\n      }).then(res => {\n        this.$store.dispatch('logout');\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4BA;AACA;AACA;AACA;EACAA;IACAC;MACAC;QACA;MADA;IADA,GAKAC,IALA,CAKAC;MACA;IACA,CAPA,EAQAC,KARA,CAQAC;MACAC;IACA,CAVA;EAYA,CAdA;;EAeAC,WACA;EACA,CAjBA;;EAkBAC,YACA;EADA,CAlBA;;EAqBAC;IACA;MACAC,QADA;MAEAC,kBAFA;MAGAC,iBAHA;MAIAC;IAJA;EAMA,CA5BA;;EA6BAC;IACA;IACAC;MACAf;QACAgB,aADA;QAEAC,uDAFA;QAGAhB;UACA;QADA,CAHA;QAMAQ;UACAS;QADA;MANA,GAUAhB,IAVA,CAUAC;QACAG;QACA;MACA,CAbA,EAcAF,KAdA,CAcAC;QACAC;MACA,CAhBA;IAiBA,CApBA;;IAsBAa;MACAnB;QACAgB,aADA;QAEAC,4EAFA;QAGAhB;UACA;QADA,CAHA;QAMAQ;UACAG,6BADA;UAEAC;QAFA;MANA,GAWAX,IAXA,CAWAC;QACAG;QACA;QACA;MACA,CAfA,EAgBAF,KAhBA,CAgBAC;QACAC;MACA,CAlBA;IAmBA,CA1CA;;IA4CAc;MACApB;QACAgB,gBADA;QAEAC,uDAFA;QAGAhB;UACA;QADA;MAHA,GAOAC,IAPA,CAOAC;QACA;MACA,CATA,EAUAC,KAVA,CAUAC;QACAC;MACA,CAZA;IAeA;;EA5DA;AA7BA","names":["mounted","axios","headers","then","res","catch","error","console","created","computed","data","user","userCategories","oldPassword","newPassword","methods","updateUser","method","url","name","updatePassword","deleteUser"],"sourceRoot":"src/views","sources":["User.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <h1>Avatar</h1>\n      <form @submit.prevent=\"updateUser(user), logout()\">\n          Nombre: <input style=\"border: 0\" type=\"text\" placeholder=\"Ingrese Username\" v-model=\"user.name\">\n          <button type=\"submit\">Actualizar</button>\n      </form>\n      <p></p>\n      <p>{{user.email}}</p>\n      <p>{{user.name}}</p>\n      \n      \n      <form @submit.prevent=\"updatePassword(user)\">\n          oldPassword: <input style=\"border: 0\" type=\"text\" placeholder=\"oldPassword\" v-model=\"oldPassword\">\n          newPassword: <input style=\"border: 0\" type=\"text\" placeholder=\"newPassword\" v-model=\"newPassword\">\n          <button type=\"submit\">Cambiar contraseña</button>\n      </form>\n      <p></p>\n      <form @submit.prevent=\"deleteUser()\">\n          ¿Quieres eliminar al usuario? <button type=\"submit\">Eliminar usuario</button>\n      </form>\n      <p></p>\n      <h3>Notificaciones</h3>\n    </div>\n  </div>\n</template>\n<script>\nimport {mapState, mapActions} from 'vuex'\nimport axios from 'axios';\nimport VueRouter from 'vue-router'\nexport default {\n  mounted () {\n    axios.get('http://localhost:250/api/v1/users/' + this.userId, {\n      headers: {\n        'Authorization': `Bearer ${this.token}`\n      }\n    })\n    .then((res) => {\n      this.user = res.data\n    })\n    .catch((error) => {\n      console.error(error)\n    })\n\n  },\n  created(){\n  //  this.dashboard(this.token)\n  },\n  computed: {\n    ...mapState(['token', 'username', 'userId'])\n  },\n  data() {\n    return {\n        user: {},\n        userCategories: {},\n        oldPassword: null,\n        newPassword: null,\n    }\n  },\n  methods: {\n   // ...mapActions(['dashboard'])\n    updateUser(user) {\n      axios({\n        method: 'put',\n        url: 'http://localhost:250/api/v1/users/' + this.userId,\n        headers: {\n                'Authorization': `Bearer ${this.token}`\n                },\n        data: {\n          name: this.user.name,\n        }\n      })\n      .then((res) => {\n        console.log(res.data)\n        this.user = res.data\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n    },\n\n    updatePassword(oldPassword, newPassword) {\n      axios({\n        method: 'put',\n        url: 'http://localhost:250/api/v1/users/' + this.userId + '/change_password',\n        headers: {\n                'Authorization': `Bearer ${this.token}`\n                },\n        data: {\n          oldPassword: this.oldPassword,\n          newPassword: this.newPassword,\n        }\n      })\n      .then((res) => {\n        console.log(res.data)\n        this.oldPassword = null\n        this.newPassword = null\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n    },\n\n    deleteUser() {\n      axios({\n        method: 'delete',\n        url: 'http://localhost:250/api/v1/users/' + this.userId,\n        headers: {\n                'Authorization': `Bearer ${this.token}`\n                }\n      })\n      .then((res) => {\n        this.$store.dispatch('logout')\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n      \n\n    },\n\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module"}