{"remainingRequest":"/home/sergio/code/login-vuejs/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sergio/code/login-vuejs/src/views/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sergio/code/login-vuejs/src/views/User.vue","mtime":1662852737014},{"path":"/home/sergio/code/login-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":1662705389539},{"path":"/home/sergio/code/login-vuejs/node_modules/babel-loader/lib/index.js","mtime":1662705389914},{"path":"/home/sergio/code/login-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":1662705389539},{"path":"/home/sergio/code/login-vuejs/node_modules/vue-loader/lib/index.js","mtime":1662705380680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwU3RhdGUsIG1hcEFjdGlvbnN9IGZyb20gJ3Z1ZXgnCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcicKZXhwb3J0IGRlZmF1bHQgewogIG1vdW50ZWQgKCkgewogICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MC9hcGkvdjEvdXNlcnMvJyArIHRoaXMudXNlcklkLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLnRva2VufWAKICAgICAgfQogICAgfSkKICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgdGhpcy51c2VyID0gcmVzLmRhdGEKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpCiAgICB9KQoKICB9LAogIGNyZWF0ZWQoKXsKICAvLyAgdGhpcy5kYXNoYm9hcmQodGhpcy50b2tlbikKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ3Rva2VuJywgJ3VzZXJuYW1lJywgJ3VzZXJJZCddKQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgICAgdXNlcjoge30sCiAgICAgICAgdXNlckNhdGVnb3JpZXM6IHt9LAogICAgICAgIG9sZFBhc3N3b3JkOiBudWxsLAogICAgICAgIG5ld1Bhc3N3b3JkOiBudWxsLAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAvLyAuLi5tYXBBY3Rpb25zKFsnZGFzaGJvYXJkJ10pCiAgICB1cGRhdGVVc2VyKHVzZXIpIHsKICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogJ3B1dCcsCiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDoyNTAvYXBpL3YxL3VzZXJzLycgKyB0aGlzLnVzZXJJZCwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLnRva2VufWAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgZGF0YTogewogICAgICAgICAgbmFtZTogdGhpcy51c2VyLm5hbWUsCiAgICAgICAgfQogICAgICB9KQogICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgICAgdGhpcy51c2VyID0gcmVzLmRhdGEKICAgICAgfSkKICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpCiAgICAgIH0pCiAgICB9LAoKICAgIHVwZGF0ZVBhc3N3b3JkKG9sZFBhc3N3b3JkLCBuZXdQYXNzd29yZCkgewogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAncHV0JywKICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjI1MC9hcGkvdjEvdXNlcnMvJyArIHRoaXMudXNlcklkICsgJy9jaGFuZ2VfcGFzc3dvcmQnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMudG9rZW59YAogICAgICAgICAgICAgICAgfSwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBvbGRQYXNzd29yZDogdGhpcy5vbGRQYXNzd29yZCwKICAgICAgICAgIG5ld1Bhc3N3b3JkOiB0aGlzLm5ld1Bhc3N3b3JkLAogICAgICAgIH0KICAgICAgfSkKICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgIHRoaXMub2xkUGFzc3dvcmQgPSBudWxsCiAgICAgICAgdGhpcy5uZXdQYXNzd29yZCA9IG51bGwKICAgICAgfSkKICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpCiAgICAgIH0pCiAgICB9LAoKICAgIGRlbGV0ZVVzZXIoKSB7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdkZWxldGUnLAogICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwL2FwaS92MS91c2Vycy8nICsgdGhpcy51c2VySWQsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy50b2tlbn1gCiAgICAgICAgICAgICAgICB9CiAgICAgIH0pCiAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9nb3V0JykKICAgICAgfSkKICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpCiAgICAgIH0pCiAgICAgIAoKICAgIH0sCgogIH0KfQo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA","file":"User.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <h1>Avatar</h1>\n      <form @submit.prevent=\"updateUser(user), logout()\">\n          Nombre: <input style=\"border: 0\" type=\"text\" placeholder=\"Ingrese Username\" v-model=\"user.name\">\n          <button type=\"submit\">Actualizar</button>\n      </form>\n      <p></p>\n      <p>{{user.email}}</p>\n      <p>{{user.name}}</p>\n      \n      \n      <form @submit.prevent=\"updatePassword(user)\">\n          oldPassword: <input style=\"border: 0\" type=\"text\" placeholder=\"oldPassword\" v-model=\"oldPassword\">\n          newPassword: <input style=\"border: 0\" type=\"text\" placeholder=\"newPassword\" v-model=\"newPassword\">\n          <button type=\"submit\">Cambiar contraseña</button>\n      </form>\n      <p></p>\n      <form @submit.prevent=\"deleteUser()\">\n          ¿Quieres eliminar al usuario? <button type=\"submit\">Eliminar usuario</button>\n      </form>\n      <p></p>\n      <h3>Notificaciones</h3>\n    </div>\n  </div>\n</template>\n<script>\nimport {mapState, mapActions} from 'vuex'\nimport axios from 'axios';\nimport VueRouter from 'vue-router'\nexport default {\n  mounted () {\n    axios.get('http://localhost:250/api/v1/users/' + this.userId, {\n      headers: {\n        'Authorization': `Bearer ${this.token}`\n      }\n    })\n    .then((res) => {\n      this.user = res.data\n    })\n    .catch((error) => {\n      console.error(error)\n    })\n\n  },\n  created(){\n  //  this.dashboard(this.token)\n  },\n  computed: {\n    ...mapState(['token', 'username', 'userId'])\n  },\n  data() {\n    return {\n        user: {},\n        userCategories: {},\n        oldPassword: null,\n        newPassword: null,\n    }\n  },\n  methods: {\n   // ...mapActions(['dashboard'])\n    updateUser(user) {\n      axios({\n        method: 'put',\n        url: 'http://localhost:250/api/v1/users/' + this.userId,\n        headers: {\n                'Authorization': `Bearer ${this.token}`\n                },\n        data: {\n          name: this.user.name,\n        }\n      })\n      .then((res) => {\n        console.log(res.data)\n        this.user = res.data\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n    },\n\n    updatePassword(oldPassword, newPassword) {\n      axios({\n        method: 'put',\n        url: 'http://localhost:250/api/v1/users/' + this.userId + '/change_password',\n        headers: {\n                'Authorization': `Bearer ${this.token}`\n                },\n        data: {\n          oldPassword: this.oldPassword,\n          newPassword: this.newPassword,\n        }\n      })\n      .then((res) => {\n        console.log(res.data)\n        this.oldPassword = null\n        this.newPassword = null\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n    },\n\n    deleteUser() {\n      axios({\n        method: 'delete',\n        url: 'http://localhost:250/api/v1/users/' + this.userId,\n        headers: {\n                'Authorization': `Bearer ${this.token}`\n                }\n      })\n      .then((res) => {\n        this.$store.dispatch('logout')\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n      \n\n    },\n\n  }\n}\n</script>"]}]}